<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.85.0" /><link rel="canonical" type="text/html" href="https://rancher-sandbox.github.io/cOS-toolkit/docs/getting-started/">
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="shortcut icon" href="https://rancher-sandbox.github.io/cOS-toolkit/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="https://rancher-sandbox.github.io/cOS-toolkit/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="https://rancher-sandbox.github.io/cOS-toolkit/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="https://rancher-sandbox.github.io/cOS-toolkit/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="https://rancher-sandbox.github.io/cOS-toolkit/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="https://rancher-sandbox.github.io/cOS-toolkit/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="https://rancher-sandbox.github.io/cOS-toolkit/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="https://rancher-sandbox.github.io/cOS-toolkit/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="https://rancher-sandbox.github.io/cOS-toolkit/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="https://rancher-sandbox.github.io/cOS-toolkit/favicons/android-192x192.png" sizes="192x192">

<title>Getting Started | cOS toolkit</title>
<meta name="description" content="cOS toolkit documentation website"><meta property="og:title" content="Getting Started" />
<meta property="og:description" content="Getting started with cOS
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://rancher-sandbox.github.io/cOS-toolkit/docs/getting-started/" /><meta property="og:site_name" content="cOS toolkit" />

<meta itemprop="name" content="Getting Started">
<meta itemprop="description" content="Getting started with cOS
"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Getting Started"/>
<meta name="twitter:description" content="Getting started with cOS
"/>




<link rel="preload" href="https://rancher-sandbox.github.io/cOS-toolkit/scss/main.min.ce822e1833a5405e77f69584ab31fd4bd422643124926787ea63be001e51b0b2.css" as="style">
<link href="https://rancher-sandbox.github.io/cOS-toolkit/scss/main.min.ce822e1833a5405e77f69584ab31fd4bd422643124926787ea63be001e51b0b2.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>



<link rel="stylesheet" href="https://rancher-sandbox.github.io/cOS-toolkit/css/prism.css"/>





<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-00000000-0', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="https://rancher-sandbox.github.io/cOS-toolkit/">
		<span class="navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="text-uppercase font-weight-bold">cOS toolkit</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="https://rancher-sandbox.github.io/cOS-toolkit/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://github.com/rancher-sandbox/cOS-toolkit/releases" target="_blank" ><i class='fab fa-github'></i><span>Github releases</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://rancher-sandbox.github.io/cos-toolkit-package-browser/" target="_blank" ><i class='fa fa-toolbox'></i><span>Browse packages</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="https://rancher-sandbox.github.io/cOS-toolkit/offline-search-index.be553f1cb919c34ffbac66d0dc644fc3.json"
  data-offline-search-base-href="https://rancher-sandbox.github.io/cOS-toolkit/"
  data-offline-search-max-results="10"
>

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="https://rancher-sandbox.github.io/cOS-toolkit/docs/getting-started/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Getting Started</h1>
<div class="lead">Getting started with cOS</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-6d9b743260710738d7e98b374307931e">Download</a></li>


    
  
    
    
	
<li>2: <a href="#pg-f085d0d6d0675180d3331caca3265de5">Installing</a></li>


    
  
    
    
	
<li>3: <a href="#pg-20ed69725da67a67450fffe152e9dc9f">Booting</a></li>


    
  
    
    
	
<li>4: <a href="#pg-b8ae70d603defa5e6fa86ed3ac457356">Upgrading</a></li>


    
  
    
    
	
<li>5: <a href="#pg-116792d44b4b0a19cbac9a2d12b83ee4">Recovery</a></li>


    
  
    
    
	
<li>6: <a href="#pg-4f3d9f9b1fc979ace402c3f90122722d">Deploying</a></li>


    
  

    </ul>


<div class="content">
      <p><img src="https://docs.google.com/drawings/d/e/2PACX-1vRSuocC4_2rHeJAWW2vqinw_EZeZxTzJFo5ZwnJaL_sdKab_R_OsCTLT_LFh1_L5fUcA_2i9FIe-k69/pub?w=1223&amp;h=691" alt=""></p>
<p>cOS provides a runtime and buildtime framework in order to boot containers in VMs, Baremetals and Cloud.</p>
<p>You can either choose to <strong>build</strong> a cOS derivative or <strong>run</strong> cOS to boostrap a new system.</p>
<p>cOS vanilla images are published to allow to deploy user-built derivatives.</p>
<p>cOS is designed to run, deploy and upgrade derivatives that can be built just as standard OCI container images. cOS assets can be used to either drive unattended deployments of a derivative or used to create custom images (with packer).</p>
<h2 id="philosophy">Philosophy</h2>

<img style="float: right;" src="https://docs.google.com/drawings/d/e/2PACX-1vRLayrWAJo6g8ssUwKmREIkwcOHWOn_nlUUNgFxkn9HcZkE3RrAXTBWd4gVj1rxPHg559kAzUk_rsqr/pub?w=384&amp;h=255">
<p>Philosophy behind cos-toolkit is simple: it allows you to create Linux derivatives from container images.</p>
<ul>
<li><strong>Container registry as a single source of truth</strong></li>
<li>Hybrid way to access your image for different scopes (development, debugging, ..)</li>
<li>No more inconsistent states between nodes. A “Store” to keep your (tagged) shared states where you can rollback and upgrade into.</li>
<li>“Stateless”: Images with upgrades are rebuilt from scratch instead of applying upgrades.</li>
<li>A/B upgrades, immutable systems</li>
</ul>
<p>The container image is booted as-is, encapsulating all the needed components (kernel, initrd included) and can be pulled locally for inspection, development and debugging. At the same time it can be used also to create installation medium as ISO, Raw images, OVA or Cloud specific images.</p>
<p>A derivative automatically inherits the following featureset:</p>
<ul>
<li><a href="./upgrading">Can upgrade to another container image</a></li>
<li><a href="./deploy">Can deploy a system from scratch from an image</a></li>
<li><a href="./recovery">Reset or recovery to a specific image</a></li>
<li><a href="../customizing/runtime_persistent_changes">Customize the image during runtime to persist changes across reboots</a></li>
<li><a href="./booting">Perform an installation from the LiveCD medium</a></li>
</ul>
<h2 id="building-cos-derivatives">Building cOS derivatives</h2>
<p>The starting point to use cos-toolkit is to check out our <a href="https://github.com/rancher-sandbox/cOS-toolkit/tree/master/examples">examples</a> and our <a href="../creating-derivatives/creating_bootable_images">creating bootable images</a> section.</p>
<p>The only requirement to build derivatives with <code>cos-toolkit</code> is Docker installed. If you are interested in building cOS-toolkit itself, see <a href="../development">Development notes</a>.</p>
<p>The toolkit itself is delivered as a set of standalone, re-usable OCI artifacts which are tagged and tracked as standard OCI images and it is installed inside the container image to provide the same featureset among derivatives, see <a href="../creating-derivatives/creating_bootable_images">how to create bootable images</a>.</p>
<h2 id="vanilla-images">Vanilla images</h2>
<p><code>cOS</code> releases are composed of vanilla images that are used internally for testing and can be used as a starting point to deploy derivatives in specific environments (e.g. AWS) or just to try out the cOS featureset.</p>
<p>The vanilla images ships no specific business-logic aside serving as a base for testing and deploying other derivatives.</p>
<h3 id="what-to-do-next">What to do next?</h3>
<p>Check out <a href="../creating-derivatives/creating_bootable_images">how to create bootable images</a> or <a href="../getting-started/download">download the cOS vanilla images</a> to give cOS a try!</p>
<p>Here below you will find the common documentation that applies to any derivative built with cOS and the cOS vanilla images.</p>

</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6d9b743260710738d7e98b374307931e">1 - Download</h1>
    <div class="lead">How to get cOS vanilla assets: ISOs, Cloud Images, Vagrant boxes, &hellip;.</div>
	<p>cOS-toolkit releases consist on container images that can be used to build derived against and the cos source tree itself.</p>
<p>cOS supports different release channels, all the final and cache images used are tagged and pushed regularly <a href="https://quay.io/repository/costoolkit/releases-green">to Quay Container Registry</a> and can be pulled for inspection from the registry as well.</p>
<p>Those are exactly the same images used during upgrades, and can also be used to build Linux derivatives from cOS.</p>
<p>For example, if you want to see locally what&rsquo;s in a openSUSE cOS version, you can:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ docker run -ti --rm quay.io/costoolkit/releases-green:cos-system-<span style="color:#000">$VERSION</span> /bin/bash
</code></pre></div><h2 id="download-cos">Download cOS</h2>
<p>You can also try out cOS from the vanilla images and use it to experiment locally or either bootstrap a derivative: those are minimal system with a small package set in order to boot and deploy a container.</p>
<p>Latest cOS-toolkit releases assets (ISOs, Raw disks, Cloud images) can be found on <a href="https://github.com/rancher-sandbox/cOS-toolkit/releases/">Github</a>, check <a href="../booting">Booting</a> for an explanation of each asset type and how to use it.</p>
<p>cOS can run in: VMs, baremetals and Cloud - the default login username/password is <code>root/cos</code>.</p>
<h3 id="install">Install</h3>
<p>To install run <code>elemental install &lt;device&gt;</code> to start the installation process. Remove the ISO/medium and reboot.</p>
<p><em>Note</em>: <code>elemental install</code> supports other options as well. Run <code>elemental install --help</code> to see a complete help.</p>
<h2 id="releases">Releases</h2>
<p>cOS has 3 variants:</p>
<ul>
<li><a href="https://quay.io/repository/costoolkit/releases-green">green</a>: openSUSE based one, shipping packages from OpenSUSE Leap 15.3 repositories.</li>
<li><a href="https://quay.io/repository/costoolkit/releases-blue">blue</a>: Fedora based one, shipping packages from Fedora 33 repositories</li>
<li><a href="https://quay.io/repository/costoolkit/releases-orange">orange</a>: Ubuntu based one, shipping packages form Ubuntu 20.10 repositories</li>
</ul>
<p>We currently support and test only the <strong>green</strong> variant.</p>
<h2 id="published-ami-images">Published AMI images</h2>
<p>We publish AMI images for each release, you can find them into ec2 for example with:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">aws ec2 describe-images --filters <span style="color:#4e9a06">&#39;Name=description,Values=cOS*&#39;</span>
</code></pre></div><p>The list of all the published AMI is released as part of the <a href="https://github.com/rancher-sandbox/cOS-toolkit/releases">releases</a> assets with the <code>ami_id.txt.tar.xz</code> file, e.g. <a href="https://github.com/rancher-sandbox/cOS-toolkit/releases/download/v0.6.7/ami_id.txt.tar.xz">v0.6.7</a></p>
<p>The AMI Owner ID is <code>053594193760</code>.</p>
<h2 id="what-to-do-next">What to do next?</h2>
<p>Check out <a href="../../customizing">the customization section</a> to customize <code>cOS</code> or <a href="../tutorials">the tutorial section</a> for some already prepared recipe examples.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f085d0d6d0675180d3331caca3265de5">2 - Installing</h1>
    <div class="lead">Installing cOS or a derivative locally</div>
	<p>cOS (or any cOS derivative built with cos-toolkit) can be installed with <code>elemental install</code>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">elemental install <span style="color:#ce5c00;font-weight:bold">[</span>options<span style="color:#ce5c00;font-weight:bold">]</span> &lt;device&gt;
</code></pre></div><table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>&ndash;cloud-init string</td>
<td>Cloud-init config file</td>
</tr>
<tr>
<td>&ndash;cosign</td>
<td>Enable cosign verification (requires images with signatures)</td>
</tr>
<tr>
<td>&ndash;cosign-key string</td>
<td>Sets the URL of the public key to be used by cosign validation</td>
</tr>
<tr>
<td>&ndash;directory string</td>
<td>Use directory as source to install from</td>
</tr>
<tr>
<td>&ndash;docker-image string</td>
<td>Install a specified container image</td>
</tr>
<tr>
<td>&ndash;force</td>
<td>Force install</td>
</tr>
<tr>
<td>&ndash;force-efi</td>
<td>Forces an EFI installation</td>
</tr>
<tr>
<td>&ndash;force-gpt</td>
<td>Forces a GPT partition table</td>
</tr>
<tr>
<td>&ndash;help</td>
<td>help for install</td>
</tr>
<tr>
<td>&ndash;iso string</td>
<td>Performs an installation from the ISO url</td>
</tr>
<tr>
<td>&ndash;no-format</td>
<td>Don’t format disks. It is implied that COS_STATE, COS_RECOVERY, COS_PERSISTENT, COS_OEM are already existing</td>
</tr>
<tr>
<td>&ndash;no-verify</td>
<td>Disable mtree checksum verification (requires images manifests generated with mtree separately)</td>
</tr>
<tr>
<td>&ndash;partition-layout string</td>
<td>Partitioning layout file</td>
</tr>
<tr>
<td>&ndash;poweroff</td>
<td>Shutdown the system after install</td>
</tr>
<tr>
<td>&ndash;reboot</td>
<td>Reboot the system after install</td>
</tr>
<tr>
<td>&ndash;strict</td>
<td>Enable strict check of hooks (They need to exit with 0)</td>
</tr>
<tr>
<td>&ndash;tty</td>
<td>Add named tty to grub</td>
</tr>
</tbody>
</table>
<h3 id="custom-oem-configuration">Custom OEM configuration</h3>
<p>During installation it can be specified a <a href="../../reference/cloud_init">cloud-init config file</a>, that will be installed and persist in the system after installation:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">elemental install --cloud-init <span style="color:#ce5c00;font-weight:bold">[</span>url<span style="color:#000;font-weight:bold">|</span>path<span style="color:#ce5c00;font-weight:bold">]</span> &lt;device&gt;
</code></pre></div><h3 id="custom-partitioning-layout">Custom partitioning layout</h3>
<p>When installing with GPT or EFI it&rsquo;s possible to specify a custom partitioning layout via specific config file, e.g.:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#204a87;font-weight:bold">stages</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:bold">partitioning</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">     </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;Repart disk&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:bold">layout</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:bold">device</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">/dev/sda</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:bold">add_partitions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">           </span>- <span style="color:#204a87;font-weight:bold">fsLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">COS_STATE</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">size</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">8192</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">pLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">state</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">           </span>- <span style="color:#204a87;font-weight:bold">fsLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">COS_OEM</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">size</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">10</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">pLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">oem</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">           </span>- <span style="color:#204a87;font-weight:bold">fsLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">COS_RECOVERY</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#8f5902;font-style:italic"># default filesystem is ext2 if omitted</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">filesystem</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ext4</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">size</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">40000</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">pLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">recovery</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">           </span>- <span style="color:#204a87;font-weight:bold">fsLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">COS_PERSISTENT</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">pLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">persistent</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#8f5902;font-style:italic"># default filesystem is ext2 if omitted</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">filesystem</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">ext4</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">size</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">40000</span><span style="color:#f8f8f8;text-decoration:underline">
</span></code></pre></div><p>Refer to the <a href="../../reference/cloud_init">cloud-init config file reference</a> about the <code>layout</code> section.</p>
<p>It can be also used to create additional partitions, or either create partitions into a different device, etc..</p>
<p>Run the installer with</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">
elemental install --partition-layout &lt;file&gt; &lt;device&gt;

</code></pre></div>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>

    <p>While specifying a custom layout it is necessary to at least create 4 partitions: <code>COS_OEM</code>, <code>COS_STATE</code>, <code>COS_RECOVERY</code>, <code>COS_PERSISTENT</code>. Keep in mind the following while adjusting the partition sizes manually:</p>
<ul>
<li><code>COS_OEM</code> typically is used to store cloud-init files, so it can be also small.</li>
<li><code>COS_STATE</code> is used to store all the system images, which by default are set to <code>3GB</code>. This value is customizable <a href="../../customizing/general_configuration">in our configuration file</a>. A system may contain 2 images (Active/Passive), plus additional space for a third transitioning image which will be created during upgrades.</li>
<li><code>COS_RECOVERY</code> contains the recovery image, and additional space for a transition image during upgrades</li>
<li><code>COS_PERSISTENT</code> is the persistent partition that is mounted over <code>/usr/local</code>. Typically is set to take all the free space left.</li>
</ul>


</div>

<h3 id="installation-from-3rd-party-livecd-or-rescue-mediums">Installation from 3rd party LiveCD or rescue mediums</h3>
<p>The installer can be used to perform installations also from outside the cOS or standard derivative ISOs.</p>
<p>For instance, it is possible to install cOS (or any derivative) with the installer from another bootable medium, or a rescue mode which is booting from RAM, given there is enough free RAM available.</p>
<h4 id="with-docker">With Docker</h4>
<p>If in the rescue system, or LiveCD you have docker available, it can be used to perform an installation</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker run --privileged -v /dev/:/dev/ -ti quay.io/costoolkit/elemental:latest install --docker-image <span style="color:#000">$IMAGE</span> <span style="color:#000">$DEVICE</span>
</code></pre></div><p>Where <code>$IMAGE</code> is the container image that we want to install (e.g. <code>quay.io/costoolkit/releases-green:cos-system-0.8.7</code> ), and <code>$DEVICE</code> is the device where to perform the installation to (e.g. <code>/dev/sda</code>).</p>
<p>Note, we used the <code>quay.io/costoolkit/elemental:latest</code> image which contains the latest stable installer and the dependencies.
You can see all the versions at <a href="https://quay.io/repository/costoolkit/elemental?tab=tags">quay</a>.</p>
<h4 id="by-using-manually-the-elemental-installer">By using manually the Elemental installer</h4>
<p>Similarly, the same mechanism can be used without docker. Download elemental from <a href="https://github.com/rancher-sandbox/elemental/releases/latest">github releases</a> and run the follow as root:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">elemental install --docker-image <span style="color:#000">$IMAGE</span> <span style="color:#000">$DEVICE</span>
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-20ed69725da67a67450fffe152e9dc9f">3 - Booting</h1>
    <div class="lead">Documents various methods for booting cOS vanilla images</div>
	
<img style="float: right;" src="https://docs.google.com/drawings/d/e/2PACX-1vQXQFmc4MnmRsPCLR1_hCElykMWbcye6TY-zDWZhVyFbIqFEXyVsLgPIKVqUCZaQTkAE00uAK66Mt-D/pub?w=507&amp;h=217">
<p>Each cOS release contains a variety of assets:</p>
<ul>
<li>ISOs <code>cOS-Seed-green-$VERSION-$ARCH.iso.tar.xz</code></li>
<li>QCOW <code>cOS-Packer-green_$VERSION-QEMU-$ARCH.tar.gz.tar.xz</code></li>
<li>OVA <code>cOS-Packer-green_$VERSION-vbox-$ARCH.tar.gz.tar.xz</code></li>
<li>Vagrant box (vbox provider) <code>cOS-Packer-green-$VERSION-vbox-$ARCH.box.tar.xz</code></li>
<li>Vagrant box (qemu provider) <code>cOS-Packer-green-$VERSION-QEMU-$ARCH.box.tar.xz</code></li>
<li>RAW Disk <code>cOS-Vanilla-RAW-$VERSION-$ARCH.raw.tar.xz</code></li>
<li>VHD <code>cOS-Vanilla-AZURE-$VERSION-$ARCH.vhd.tar.xz</code></li>
<li>GCE <code>cOS-Vanilla-GCE-green-$VERSION-$ARCH.raw.tar.xz</code></li>
</ul>
<p>here we try to summarize and document how they are meant to be consumed.</p>
<h2 id="iso">ISO</h2>
<p>ISO images (e.g. ``cOS-Seed-green-$VERSION-$ARCH.iso.tar.xz` ) are shipping a cOS vanilla image and they feature an installer to perform an automated installation. They can be used to burn USB sticks or CD/DVD used to boot baremetals. Once booted, you can install cOS with:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">elemental install <span style="color:#000">$DEVICE</span>
</code></pre></div><p>See also [../install] for installation options.</p>
<p>After the first boot you can also switch to a derivative by:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">elemental upgrade --docker-image --no-verify <span style="color:#000">$IMAGE</span>
</code></pre></div><h2 id="booting-from-network">Booting from network</h2>
<p>You can boot a cOS squashfs by using a native iPXE implementation on your
system or by inserting a custom build iPXE iso by using your either your servers
management web-interface (ILO, iDrac, &hellip;) or using a
<a href="https://www.dmtf.org/standards/redfish">redfish</a> library or its vendor specific implementation (e.g. <a href="https://hewlettpackard.github.io/python-redfish-utility/">ilorest</a>).</p>
<p>To boot from IPXE you need to extract the squashfs from
<a href="https://quay.io/repository/costoolkit/releases-green?tab=tags">images</a> with the <code>cos-img-recovery-</code> prefix.
By pulling the image, saving it using docker save, then unpack the single layer
in the file to an extra directory and then run</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$&gt; mksquashfs &lt;path_to_folder&gt; &lt;output_path&gt;/root.squashfs
</code></pre></div><p><strong>Note:</strong>
The squashfs file can also be extracted using the following <code>docker</code> command:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$&gt; docker run -v <span style="color:#000">$PWD</span>:/cOS --entrypoint /usr/bin/luet -ti --rm quay.io/costoolkit/toolchain util unpack quay.io/costoolkit/releases-green:cos-img-recovery-&lt;version&gt; .
</code></pre></div><p>Then copy the <code>boot</code> directory and the squashfs file to your webserver and use
the following script to boot.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic">#!ipxe
</span><span style="color:#8f5902;font-style:italic"></span>
ifconf
kernel http://&lt;web_server_ip&gt;/boot/vmlinuz <span style="color:#000">ip</span><span style="color:#ce5c00;font-weight:bold">=</span>dhcp rd.cos.disable rd.noverifyssl
<span style="color:#000">root</span><span style="color:#ce5c00;font-weight:bold">=</span>live:http://&lt;web_server_ip&gt;/root.squashfs <span style="color:#000">console</span><span style="color:#ce5c00;font-weight:bold">=</span>ttyS0 <span style="color:#000">console</span><span style="color:#ce5c00;font-weight:bold">=</span>tty1 cos.setup<span style="color:#ce5c00;font-weight:bold">=</span>http://&lt;web_server_ip&gt;/&lt;path_to_cloud_config.yaml&gt;
initrd http://&lt;web_server_ip&gt;/boot/initrd
boot
</code></pre></div><p>To build a custom iPXE image clone the source from
<a href="https://github.com/ipxe/ipxe">https://github.com/ipxe/ipxe</a>, then traverse into
the <code>src</code> directory and run <code>make EMBED=&lt;/path/to/your/script.ipxe&gt;</code>. The
resulting iso can be found in <code>src/bin/ipxe.iso</code> and should be <code>~1MB</code> in size.</p>
<h2 id="virtual-machines">Virtual machines</h2>
<p>For booting into Virtual machines we offer QCOW2, OVA, and raw disk recovery images which can be used to bootstrap your booting container.</p>
<h3 id="qcow2">QCOW2</h3>
<p>QCOW2 images ( e.g. <code>cOS-Packer-green-$VERSION-QEMU-$ARCH.tar.gz.tar.xz</code> ) contains a pre-installed cOS system which can be booted via QEMU, e.g:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">qemu-system-x86_64 -m <span style="color:#0000cf;font-weight:bold">2048</span> -hda cOS -nographic
</code></pre></div><h3 id="ova">OVA</h3>
<p>Ova images ( e.g. <code>cOS-Packer-green-$VERSION-vbox-$ARCH.tar.gz.tar.xz</code> ) contains a pre-installed cOS system which can be booted via vbox.
Please check the virtuabox docs on how to create a new VM with an existing disk.</p>
<h3 id="vagrant">Vagrant</h3>
<p>Download the vagrant box artifact ( e.g. <code>cOS-Packer-green-$VERSION-{vbox, QEMU}-$ARCH.box.tar.xz</code> ), extract it and run:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">vagrant box add cos &lt;cos-box-image&gt;
vagrant init cos
vagrant up
</code></pre></div><h3 id="raw-disk-images">RAW disk images</h3>
<p>RAW disk images ( e.g. <code>cOS-Vanilla-RAW-green-$VERSION-$ARCH.raw.tar.xz</code> ) contains only the <code>cOS</code> recovery system. Those are typically used when creating derivatives images based on top of <code>cOS</code>.</p>
<p>They can be run with QEMU with:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">qemu-system-x86_64 -m <span style="color:#0000cf;font-weight:bold">2048</span> -hda &lt;cos-disk-image&gt;.raw -bios /usr/share/qemu/ovmf-x86_64.bin
</code></pre></div><h2 id="cloud-images">Cloud Images</h2>
<p>Cloud images are <code>vanilla</code> images that boots into <a href="../recovery">recovery mode</a> and can be used to deploy
whatever image you want to the VM. Then you can snapshot that VM into a VM image ready to deploy with the default cOS
system or your derivative.</p>
<p>At the moment we support Azure and AWS images among our artifacts. We publish AWS images that can also be re-used in packer templates for creating customized AMI images.</p>
<p>The RAW image can then be used into packer templates to generate custom Images, or used as-is with a userdata to deploy a container image of choice with an input user-data.</p>
<h3 id="import-an-aws-image-manually">Import an AWS image manually</h3>


<div class="pageinfo pageinfo-primary">
<p>You can also use RAW images ( e.g. <code>cOS-Vanilla-RAW-green-$VERSION-$ARCH.raw.tar.xz</code> ) manually when importing AMIs images and use them to generate images with Packer. See <a href="../../creating-derivatives/packer/build_ami">build AMI with Packer</a></p>

</div>

<ol>
<li>Upload the raw image to an S3 bucket</li>
</ol>
<pre><code>aws s3 cp &lt;cos-raw-image&gt; s3://&lt;your_s3_bucket&gt;
</code></pre><ol start="2">
<li>Created the disk container JSON (<code>container.json</code> file) as:</li>
</ol>
<pre><code>{
  &quot;Description&quot;: &quot;cOS Testing image in RAW format&quot;,
  &quot;Format&quot;: &quot;raw&quot;,
  &quot;UserBucket&quot;: {
    &quot;S3Bucket&quot;: &quot;&lt;your_s3_bucket&gt;&quot;,
    &quot;S3Key&quot;: &quot;&lt;cos-raw-image&gt;&quot;
  }
}
</code></pre><ol start="3">
<li>Import the disk as snapshot</li>
</ol>
<pre><code>aws ec2 import-snapshot --description &quot;cOS PoC&quot; --disk-container file://container.json
</code></pre><ol start="4">
<li>
<p>Followed the procedure described in <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/creating-an-ami-ebs.html#creating-launching-ami-from-snapshot">AWS docs</a> to register an AMI from snapshot. Used all default settings unless for the firmware, set to force to UEFI boot.</p>
</li>
<li>
<p>Launch instance with this simple userdata with at least a 16Gb boot disk:</p>
</li>
</ol>
<pre><code>name: &quot;Default deployment&quot;
stages:
   rootfs.after:
     - name: &quot;Repart image&quot;
       layout:
         # It will partition a device including the given filesystem label or part label (filesystem label matches first)
         device:
           label: COS_RECOVERY
         add_partitions:
           - fsLabel: COS_STATE
             # 10Gb for COS_STATE, so the disk should have at least 16Gb
             size: 10240
             pLabel: state
           - fsLabel: COS_PERSISTENT
             # unset size or 0 size means all available space
             pLabel: persistent
   initramfs:
     - if: '[ -f &quot;/run/cos/recovery_mode&quot; ]'
       name: &quot;Set sshd to wait for deployment&quot;
       files:
       - path: &quot;/etc/systemd/system/sshd.service.d/override.conf&quot;
         content: |
             [Unit]
             After=cos-setup-network.service
   network:
     - if: '[ -f &quot;/run/cos/recovery_mode&quot; ]'
       name: &quot;Deploy cos-system&quot;
       commands:
         - |
             # Use `elemental reset --docker-image &lt;img-ref&gt;` to deploy a custom image
             # By default the recovery cOS gets deployed
             elemental reset --reboot

</code></pre><h3 id="importing-a-google-cloud-image-manually">Importing a Google Cloud image manually</h3>


<div class="pageinfo pageinfo-primary">
<p>You need to use the GCE images ( e.g. <code>cOS-Vanilla-GCE-green-$VERSION-$ARCH.raw.tar.xz</code> ) manually when importing GCE images and use them to generate images with Packer. See <a href="../../creating-derivatives/packer/build_gcp">build GCE with Packer</a></p>

</div>

<ol>
<li>Upload the Google Cloud compressed disk to your bucket</li>
</ol>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">gsutil cp &lt;cos-gce-image&gt; gs://&lt;your_bucket&gt;/
</code></pre></div><ol start="2">
<li>Import the disk as an image</li>
</ol>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">gcloud compute images create &lt;new_image_name&gt; --source-uri<span style="color:#ce5c00;font-weight:bold">=</span>&lt;your_bucket&gt;/&lt;cos-gce-image&gt; --guest-os-features<span style="color:#ce5c00;font-weight:bold">=</span>UEFI_COMPATIBLE
</code></pre></div><ol start="3">
<li>Launch instance with this simple userdata with at least a 16Gb boot disk:</li>
</ol>

<p style="font-style: italic;"><i class="fa fa-info-circle" aria-hidden="true">&nbsp;</i>See <a href="https://cloud.google.com/container-optimized-os/docs/how-to/create-configure-instance#using_cloud-init_with_the_cloud_config_format">here</a> on how to add user-data to an instance</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;Default deployment&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">stages</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:bold">rootfs.after</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">     </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;Repart image&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:bold">layout</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># It will partition a device including the given filesystem label or part label (filesystem label matches first)</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:bold">device</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#204a87;font-weight:bold">label</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">COS_RECOVERY</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:bold">add_partitions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">           </span>- <span style="color:#204a87;font-weight:bold">fsLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">COS_STATE</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#8f5902;font-style:italic"># 10Gb for COS_STATE, so the disk should have at least 16Gb</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">size</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">10240</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">pLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">state</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">           </span>- <span style="color:#204a87;font-weight:bold">fsLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">COS_PERSISTENT</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#8f5902;font-style:italic"># unset size or 0 size means all available space</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">pLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">persistent</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:bold">initramfs</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">     </span>- <span style="color:#204a87;font-weight:bold">if</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;[ -f &#34;/run/cos/recovery_mode&#34; ]&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;Set sshd to wait for deployment&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:bold">files</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">       </span>- <span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;/etc/systemd/system/sshd.service.d/override.conf&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:bold">content</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#8f5902;font-style:italic">
</span><span style="color:#8f5902;font-style:italic">             [Unit]
</span><span style="color:#8f5902;font-style:italic">             After=cos-setup-network.service</span><span style="color:#f8f8f8;text-decoration:underline">             
</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:bold">network</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">     </span>- <span style="color:#204a87;font-weight:bold">if</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;[ -f &#34;/run/cos/recovery_mode&#34; ]&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;Deploy cos-system&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:bold">commands</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">         </span>- <span style="color:#000;font-weight:bold">|</span><span style="color:#8f5902;font-style:italic">
</span><span style="color:#8f5902;font-style:italic">             # Use `elemental reset --docker-image &lt;img-ref&gt;` to deploy a custom image
</span><span style="color:#8f5902;font-style:italic">             # By default recovery cOS gets deployed
</span><span style="color:#8f5902;font-style:italic">             elemental reset --reboot</span><span style="color:#f8f8f8;text-decoration:underline">             
</span></code></pre></div><h3 id="importing-an-azure-image-manually">Importing an Azure image manually</h3>

<p style="font-style: italic;"><i class="fa fa-info-circle" aria-hidden="true">&nbsp;</i><p>You need to use the AZURE images ( e.g. <code>cOS-Vanilla-AZURE-green-$VERSION-$ARCH.raw.tar.xz</code> ) manually when importing Azure images.</p>
</p>
<ol>
<li>Upload the Azure Cloud VHD disk in <code>.vhda</code> format ( extract e.g. <code>cOS-Vanilla-AZURE-green-0.6.0-g7d04f1db-x86_64.vhd.tar.xz</code> ) to your bucket</li>
</ol>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">az storage copy --source &lt;cos-azure-image&gt; --destination https://&lt;account&gt;.blob.core.windows.net/&lt;container&gt;/&lt;destination-cos-azure-image&gt;

</code></pre></div><ol start="2">
<li>Import the disk as an image</li>
</ol>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">az image create --resource-group &lt;resource-group&gt; --source https://&lt;account&gt;.blob.core.windows.net/&lt;container&gt;/&lt;cos-azure-image&gt; --os-type linux --hyper-v-generation v2 --name &lt;image-name&gt;
</code></pre></div><ol start="3">
<li>Launch instance with this simple userdata with at least a 16Gb boot disk:</li>
</ol>
<p>Hint: There is currently no way of altering the boot disk of an Azure VM via GUI, use the azure-cli to launch the VM with an expanded OS disk</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;Default deployment&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">stages</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:bold">rootfs.after</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">     </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;Repart image&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:bold">layout</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># It will partition a device including the given filesystem label or part label (filesystem label matches first)</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:bold">device</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#204a87;font-weight:bold">label</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">COS_RECOVERY</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:bold">add_partitions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">           </span>- <span style="color:#204a87;font-weight:bold">fsLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">COS_STATE</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#8f5902;font-style:italic"># 10Gb for COS_STATE, so the disk should have at least 16Gb</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">size</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">10240</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">pLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">state</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">           </span>- <span style="color:#204a87;font-weight:bold">fsLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">COS_PERSISTENT</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#8f5902;font-style:italic"># unset size or 0 size means all available space</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">pLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">persistent</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:bold">initramfs</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">     </span>- <span style="color:#204a87;font-weight:bold">if</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;[ -f &#34;/run/cos/recovery_mode&#34; ]&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;Set sshd to wait for deployment&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:bold">files</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">       </span>- <span style="color:#204a87;font-weight:bold">path</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;/etc/systemd/system/sshd.service.d/override.conf&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:bold">content</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#8f5902;font-style:italic">
</span><span style="color:#8f5902;font-style:italic">             [Unit]
</span><span style="color:#8f5902;font-style:italic">             After=cos-setup-network.service</span><span style="color:#f8f8f8;text-decoration:underline">             
</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:bold">network</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">     </span>- <span style="color:#204a87;font-weight:bold">if</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;[ -f &#34;/run/cos/recovery_mode&#34; ]&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;Deploy cos-system&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:bold">commands</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">         </span>- <span style="color:#000;font-weight:bold">|</span><span style="color:#8f5902;font-style:italic">
</span><span style="color:#8f5902;font-style:italic">             # Use `elemental reset --docker-image &lt;img-ref&gt;` to deploy a custom image
</span><span style="color:#8f5902;font-style:italic">             # By default recovery cOS gets deployed
</span><span style="color:#8f5902;font-style:italic">             elemental reset --reboot</span><span style="color:#f8f8f8;text-decoration:underline">             
</span></code></pre></div><h2 id="login">Login</h2>
<p>By default you can login with the user <code>root</code> and password <code>cos</code>.</p>
<p>See the <a href="../../customizing/login">customization section</a> for examples on how to persist username and password changes after installation.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-b8ae70d603defa5e6fa86ed3ac457356">4 - Upgrading</h1>
    <div class="lead">How to run upgrades in cOS</div>
	
<img style="float: right;" src="https://docs.google.com/drawings/d/e/2PACX-1vTM9N71bvNnf8PqeHyzVdfVACHix8vTS5aMGsdQGz2eVqyWyKlVreep4UJVVnNpSAKPLVOwEhwAmhTP/pub?w=379&amp;h=308">
<p>cOS and every derivative can upgrade, rollback or just switch to different versions in runtime by using the toolkit installed inside the image.</p>
<p>To upgrade an installed system, just run <code>elemental upgrade</code> and reboot.</p>
<p>This will perform an upgrade based on the default derivative configuration for the image. See <a href="../../customizing/general_configuration">general configuration</a> on how to configure defaults when building a derivative.</p>
<p>&ldquo;Upgrades&rdquo; are not carried over the usual way of treating each single package individually: cOS considers the container image as a new system where to boot into. It will pull a new container image during this phase, which will be booted on the next reboot.</p>
<h2 id="upgrade-to-a-specific-container-image">Upgrade to a specific container image</h2>
<p>To specify a specific container image to upgrade to instead of the regular upgrade channels, run <code>elemental upgrade --docker-image image</code>.</p>
<p><em>Note</em> by default <code>elemental upgrade --docker-image</code> checks images against the notary registry server for valid signatures for the images tag. To disable image verification, run <code>elemental upgrade --no-verify --docker-image</code>.</p>
<h2 id="integration-with-system-upgrade-controller">Integration with System Upgrade Controller</h2>
<p>If running a kubernetes cluster on the <code>cOS</code> system, you can leverage the <a href="https://github.com/rancher/system-upgrade-controller">system-upgrade-controller</a> to trigger upgrades to specific image versions, for example:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000">---</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">apiVersion</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">upgrade.cattle.io/v1</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">kind</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Plan</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">metadata</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">elemental-upgrade</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">namespace</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">system-upgrade</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">labels</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">k3s-upgrade</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">server</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">spec</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">concurrency</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">version</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#000">fleet-sample</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Image tag</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">nodeSelector</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">matchExpressions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- {<span style="color:#204a87;font-weight:bold">key: k3s.io/hostname, operator</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">Exists}</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">serviceAccountName</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">system-upgrade</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">cordon</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#  drain:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#8f5902;font-style:italic">#    force: true</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">upgrade</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">image</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">quay.io/costoolkit/test-images</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic"># Image upgrade reference</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">command</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span>- <span style="color:#4e9a06">&#34;/usr/sbin/suc-upgrade&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span></code></pre></div><p>See also <a href="../tutorials/trigger_upgrades_with_fleet">trigger upgrades with fleet</a></p>
<h2 id="from-iso">From ISO</h2>
<p>The ISO can be also used as a recovery medium: type <code>elemental upgrade</code> from a LiveCD. It will then try to upgrade the image of the active partition installed in the system.</p>
<h2 id="how-it-works">How it works</h2>
<p>cOS during installation sets two <code>.img</code> images files in the <code>COS_STATE</code> partition:</p>
<ul>
<li><code>/cOS/active.img</code> labeled <code>COS_ACTIVE</code>: Where <code>cOS</code> typically boots from</li>
<li><code>/cOS/passive.img</code> labeled <code>COS_PASSIVE</code>: Where <code>cOS</code> boots for fallback</li>
</ul>
<p>Those are used by the upgrade mechanism to prepare and install a pristine <code>cOS</code> each time an upgrade is attempted.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-116792d44b4b0a19cbac9a2d12b83ee4">5 - Recovery</h1>
    <div class="lead">How to use the recovery partition to reset the system or perform upgrades.</div>
	<p>cOS derivatives have a recovery mechanism built-in which can be leveraged to restore the system to a known point. At installation time, the recovery partition is created from the installation medium.</p>
<p>The recovery system can be accessed during boot by selecting the last entry in the menu (labeled by &ldquo;recovery&rdquo;).</p>
<p>A derivative can be recovered anytime by booting into the <code> recovery</code> partition and by running <code>elemental reset</code> from it.</p>
<p>This command will regenerate the bootloader and the images in the <code>COS_STATE</code> partition by using the recovery image.</p>
<h3 id="upgrading-the-recovery-partition">Upgrading the recovery partition</h3>
<p>From either the active or passive system, the recovery partition can also be upgraded by running</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">elemental upgrade --recovery
</code></pre></div><p>It also supports to specify docker images directly:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">elemental upgrade --recovery --docker-image &lt;image&gt;
</code></pre></div><h3 id="upgrading-the-active-system-from-the-recovery">Upgrading the active system from the recovery</h3>
<p>The recovery system can upgrade also the active system by running <code>elemental upgrade</code>, and it also supports to specify docker images directly:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">elemental upgrade --recovery --docker-image &lt;image&gt;
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-4f3d9f9b1fc979ace402c3f90122722d">6 - Deploying</h1>
    <div class="lead">How to deploy derivatives images from cOS vanilla images</div>
	<p>cOS vanilla images, like ISOs, cloud images or raw disks can be used to deploy another derivative image.</p>
<h2 id="elemental-reset"><code>elemental reset</code></h2>
<p><code>elemental reset</code> can be used to reset the system from the recovery image or from a custom image. Vanilla images only include a minimal recovery partition and system.</p>
<p>It can be either invoked manually with <code>elemental reset --docker-image &lt;img-ref&gt;</code> or used in conjuction with a cloud-init configuration, for example consider the following <a href="../../reference/cloud_init">cloud-init configuration file</a>:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;Default deployment&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">stages</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:bold">rootfs.after</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">     </span>- <span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;Repart image&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:bold">layout</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#8f5902;font-style:italic"># It will partition a device including the given filesystem label or part label (filesystem label matches first)</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:bold">device</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">           </span><span style="color:#204a87;font-weight:bold">label</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">COS_RECOVERY</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">         </span><span style="color:#204a87;font-weight:bold">add_partitions</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">           </span>- <span style="color:#204a87;font-weight:bold">fsLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">COS_STATE</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#8f5902;font-style:italic"># 10Gb for COS_STATE, so the disk should have at least 16Gb</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">size</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#0000cf;font-weight:bold">10240</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">pLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">state</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">           </span>- <span style="color:#204a87;font-weight:bold">fsLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">COS_PERSISTENT</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#8f5902;font-style:italic"># unset size or 0 size means all available space</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">             </span><span style="color:#204a87;font-weight:bold">pLabel</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">persistent</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">   </span><span style="color:#204a87;font-weight:bold">network</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">     </span>- <span style="color:#204a87;font-weight:bold">if</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;[ -f &#34;/run/cos/recovery_mode&#34; ]&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:bold">name</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;Deploy cOS system&#34;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">       </span><span style="color:#204a87;font-weight:bold">commands</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">         </span>- <span style="color:#000;font-weight:bold">|</span><span style="color:#8f5902;font-style:italic">
</span><span style="color:#8f5902;font-style:italic">             # Use `elemental reset --docker-image &lt;img-ref&gt;` to deploy a custom image
</span><span style="color:#8f5902;font-style:italic">             # By default the recovery cOS gets deployed
</span><span style="color:#8f5902;font-style:italic">             elemental reset --reboot --docker-image $IMAGE</span><span style="color:#f8f8f8;text-decoration:underline">             
</span></code></pre></div><p>The following will first repartition the image after the <code>rootfs</code> <a href="../../customizing/stages">stage</a> and will run <code>elemental reset</code> when booting into <a href="../recovery">recovery mode</a>. RAW vanilla disk images automatically boot by default into recovery, so the first thing upon booting is deploying the system</p>

</div>



    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener" href="https://rancher-users.slack.com/messages/cos-toolkit" aria-label="Slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2022 SUSE LLC All Rights Reserved</small>
        <small class="ml-1"><a href="https://www.suse.com/company/legal/" target="_blank" rel="noopener">Privacy Policy</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>






 













<script src="https://rancher-sandbox.github.io/cOS-toolkit/js/main.min.3b172c13b62c2bea8b1c9d2599cddc8cf89718a92d792c680871c81ba43d8c85.js" integrity="sha256-OxcsE7YsK&#43;qLHJ0lmc3cjPiXGKkteSxoCHHIG6Q9jIU=" crossorigin="anonymous"></script>



<script src='https://rancher-sandbox.github.io/cOS-toolkit/js/prism.js'></script>



  </body>
</html>
